
---

# Phonebook — Full Stack Open (Part 2, Exercises 2.6–2.15)

A React + JSON Server phonebook app that demonstrates **controlled forms**, **client-side filtering**, and **CRUD over HTTP** with **axios**, incrementally built through **Exercises 2.6 → 2.15**.

> **Attribution & Academic Integrity**
> This project was developed by me as a learning exercise inspired by the *Full Stack Open* course (Part 2: Forms & Communicating with Server). I wrote the code myself, adapting patterns from the course readings and documentation. Where relevant, I’ve included comments and this attribution note. Please do not copy this work verbatim for academic submissions.

---

## Table of Contents

* [Features](#features)
* [Architecture](#architecture)
* [Project Structure](#project-structure)
* [Getting Started](#getting-started)
* [Available Scripts](#available-scripts)
* [Data Model & API](#data-model--api)
* [Implementation Details](#implementation-details)
* [Exercise Coverage (2.6–2.15)](#exercise-coverage-26–215)
* [Quality & Conventions](#quality--conventions)
* [Troubleshooting](#troubleshooting)
* [License](#license)

---

## Features

* Add people to the phonebook with **name** and **number** (controlled form).
* **Prevent duplicates** (case-insensitive) with clear alert UI.
* **Filter** visible entries by name (case-insensitive).
* Persist data to a **JSON Server**:

  * Load initial data via `GET /persons`
  * Create with `POST /persons`
  * Update number with `PUT /persons/:id` (after confirmation)
  * Delete with `DELETE /persons/:id` (after confirmation)
* Clean separation between **UI** and **HTTP logic** via a `services/persons.js` module.

---

## Architecture

* **Frontend:** React (Vite) single-page app
* **Backend (Dev):** `json-server` serving `db.json` on port **3001**
* **HTTP Client:** `axios` (wrapped in `src/services/persons.js`)
* **State management:** React `useState` & derived values; `useEffect` for initial data fetch

---

## Project Structure

```
project-root/
  db.json
  package.json
  index.html
  src/
    App.jsx
    index.css
    main.jsx
    components/
      Filter.jsx
      PersonForm.jsx
      Persons.jsx
    services/
      persons.js
```

---

## Getting Started

### Prerequisites

* Node.js (LTS recommended)
* npm

### Install Dependencies

```bash
npm install
```

### Seed Data

Create `db.json` in the project root:

```json
{
  "persons": [
    { "name": "Arto Hellas",      "number": "040-123456",     "id": "1" },
    { "name": "Ada Lovelace",     "number": "39-44-5323523",  "id": "2" },
    { "name": "Dan Abramov",      "number": "12-43-234345",   "id": "3" },
    { "name": "Mary Poppendieck", "number": "39-23-6423122",  "id": "4" }
  ]
}
```

### Start the Servers (Two Terminals)

**Terminal A (JSON Server):**

```bash
npm run server
# serves http://localhost:3001
```

**Terminal B (Vite Dev Server):**

```bash
npm run dev
# serves http://localhost:5173 (default)
```

---

## Available Scripts

```json
{
  "scripts": {
    "dev": "vite",
    "server": "json-server -p 3001 db.json",
    "build": "vite build",
    "preview": "vite preview"
  }
}
```

---

## Data Model & API

### Person

```ts
type Person = {
  id: string;        // generated by json-server on POST
  name: string;      // unique (enforced in client)
  number: string;    // phone number as free text
}
```

### Endpoints (json-server)

* `GET    /persons` — list all
* `POST   /persons` — create `{ name, number }` → returns created `{ ... , id }`
* `PUT    /persons/:id` — replace entire person object (used to update number)
* `DELETE /persons/:id` — remove by id

---

## Implementation Details

### Components

* **`Filter.jsx`** — Controlled input for filtering entries by name.
* **`PersonForm.jsx`** — Controlled form to add (or trigger update) of a person.
* **`Persons.jsx`** — Renders the filtered list; includes a **Delete** button per person.

### State & Effects

* `App.jsx` holds:

  * `persons`, `newName`, `newNumber`, `filter`
  * `useEffect` to fetch initial persons (once, on mount)
  * derived `personsToShow` based on `filter`

### Service Module (`src/services/persons.js`)

```js
import axios from 'axios';
const baseUrl = 'http://localhost:3001/persons';

const getAll = () => axios.get(baseUrl).then(res => res.data);
const create = (person) => axios.post(baseUrl, person).then(res => res.data);
const update = (id, person) => axios.put(`${baseUrl}/${id}`, person).then(res => res.data);
const remove = (id) => axios.delete(`${baseUrl}/${id}`).then(res => res.data);

export default { getAll, create, update, remove };
```

### Duplicate Handling (Add vs. Update)

* On submit, if `name` already exists (case-insensitive), show confirmation:

  * **OK** → send `PUT /persons/:id` with new `{ ...person, number }`
  * **Cancel** → do nothing
* On `404` during update/delete, alert user and **synchronize local state** by removing the stale entry.

---

## Exercise Coverage (2.6–2.15)

* **2.6** — Add name via controlled form; prevent default submit; render list.
* **2.7** — Block duplicates (case-insensitive) with alert.
* **2.8** — Add **number** field; display `name number`.
* **2.9** — **Filter** by name (case-insensitive).
* **2.10** — Refactor into components: `Filter`, `PersonForm`, `Persons`.
* **2.11** — Fetch initial data from server (`GET /persons` in `useEffect`).
* **2.12** — Persist new person with `POST /persons`.
* **2.13** — Extract HTTP logic to `src/services/persons.js`.
* **2.14** — Delete person (`DELETE /persons/:id`) with confirmation.
* **2.15** — Replace existing person’s number on confirmation (`PUT /persons/:id`).

---

## Quality & Conventions

* **State immutability:** use `concat`, `map`, `filter` (no direct mutation).
* **Keys in lists:** prefer `id` from server; fallback to `name` only if unique.
* **Conventional Commits:**

  * `feat(phonebook): add number field (Part 2 — Exercise 2.8)`
  * `refactor(phonebook): extract HTTP logic to services (2.13)`
  * `feat(phonebook): delete & update via API (2.14–2.15)`
* **Accessibility/UX:** clear alerts; form resets after successful operations.

---

## Troubleshooting

* **`EADDRINUSE: 3001`**
  Another process is using port 3001. Stop it or change the `server` script port.
* **Server down / 404 on update/delete**
  The app warns the user and cleans local state accordingly.
* **CORS/Network issues**
  Ensure both servers are running locally and that `baseUrl` matches `json-server`.

---

## License

This repository contains my original code for learning purposes. Dependencies keep their respective licenses. Please credit *Full Stack Open* as the inspiration for the exercise progression.

---

